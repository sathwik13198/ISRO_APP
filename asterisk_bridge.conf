; Asterisk Bridge Configuration for IAX
; This file provides bridge functionality for connecting IAX users
; Include this file in extensions.conf: #include => "asterisk_bridge.conf"

[bridge]
; Bridge context for connecting two IAX users directly
; This allows dynamic routing based on Android device IDs

; Pattern: bridge/user1/user2 - connects user1 and user2
exten => bridge/${ARG1}/${ARG2},1,NoOp(Bridging ${ARG1} and ${ARG2})
exten => bridge/${ARG1}/${ARG2},2,Dial(IAX2/${ARG1}&IAX2/${ARG2},30)
exten => bridge/${ARG1}/${ARG2},3,Hangup()

; Simple routing - call any user by their username/device ID
; This is the main pattern used by Android app
exten => _X.,1,NoOp(Calling IAX user ${EXTEN})
exten => _X.,2,Dial(IAX2/${EXTEN},30)
exten => _X.,3,Hangup()

; Direct user-to-user bridge (alternative method)
exten => direct/${ARG1}/${ARG2},1,NoOp(Direct bridge: ${ARG1} -> ${ARG2})
exten => direct/${ARG1}/${ARG2},2,Dial(IAX2/${ARG2},30)
exten => direct/${ARG1}/${ARG2},3,Hangup()

